<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simulated Sportsbook</title>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.8/dist/semantic.min.css">
    <script src="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.8/dist/semantic.min.js"></script>
    <style>
        .collapse {
            background-color: black;
            color: white;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
    }
        .collapse-content {
            color: white;
            padding: 0 18px;
            display: none;
            overflow: hidden;
            background-color: black
    }
    </style>
</head>
<body style="background-color: #202124; color: white">
<div style="text-align: center">
    <h2>Sam's Simulated Sportsbook</h2>
        <h4>Logged in as {{ username.title }}</h4>
        <h4>{{ username.title }}'s Current Balance: {{ current_balance }}</h4>
        <h4>Sportsbook House Account Current Balance: {{ house_balance }}</h4>
        <h5><a href="/account">Check your account balances here.</a></h5>

        <h5><a href="/logout">Logout</a></h5>
        {% if messages %}
            {% for message in messages %}
                <h2>{{ message }}</h2>
            {% endfor %}
        {% endif %}
    <h4>NFL, and NBA lines.</h4>
    <button type="button" class="collapse" style="font-weight: bold; display: block; text-align: center" id="nba_events">NBA Games</button>
        <div class="collapse-content" style="text-align: center">
            {% for event in nba_events %}
            <div class="ui message" style="background-color: #202124">
                <button type="button" class="collapse" style="font-weight: bold; display: block; text-align: center; background-color: #5C5F58" id="{{ event.external_id }}">{{ event }}</button>
                <div class="collapse-content" style="text-align: center">
                    <p>Home Team --> {{ event.home_team }} | Spread: {{ event.spread_home_team_points }} / {{ event.spread_home_team_price }} | Money Line: {{ event.home_team_money_line_price }}</p>
                    <p>Away Team --> {{ event.away_team }} | Spread: {{ event.spread_away_team_points }} / {{ event.spread_away_team_price }} | Money Line: {{ event.away_team_money_line_price }}</p>
                    <p>Over Under --> {{ event.over_under_points }} | Over Price: {{ event.over_price }} | Under Price: {{ event.under_price }}</p>
                    <div class="checkbox">
                        <form method="post" enctype="multipart/form-data" class="ui form error" autocomplete="off" id="{{ event.external_id }}">
                            {% csrf_token %}
                            <hr>
                            <h4>Select the type of bet you would like to place.(Only one bet at a time per event)</h4>
                            <label for="{{ event.external_id }}">Money Line</label>
                            <input type="checkbox" name="{{ event.external_id }}" id="{{ event.external_id }}" value="money line">
                            <br>
                            <label for="{{ event.external_id }}">Spread</label>
                            <input type="checkbox" name="{{ event.external_id }}" id="{{ event.external_id }}" value="spread">
                            <br>
                            <label for="{{ event.external_id }}">Over Under</label>
                            <input type="checkbox" name="{{ event.external_id }}" id="{{ event.external_id }}" value="over_under">
                            <br>
                            <label for="{{ event.external_id }} | predicted_outcome">Select a winner</label>
                            <select id="{{ event.external_id }} | predicted_outcome" name="{{ event.external_id }} | predicted_outcome">
                                <option disabled selected value>Select</option>
                                <option value="{{ event.home_team }}">{{ event.home_team }}</option>
                                <option value="{{ event.away_team }}">{{ event.away_team }}</option>
                                <option value="Over">Over</option>
                                <option value="Under">Under</option>
                            </select>
                            <br>
                            <label for="{{ event.external_id }} | amount_wagered">Amount to Wager</label>
                            <input type="number" step="any" name="{{ event.external_id }} | amount_wagered" id="{{ event.external_id }} | amount_wagered" placeholder="0.00">
                            <button type="submit" id="submit_form" class="ui blue basic button">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
        {% endfor %}
        </div>
    <br>
    <hr>
    <br>
    <button type="button" class="collapse" style="font-weight: bold; display: block; text-align: center" id="nfl_events">NFL Games</button>
        <div class="collapse-content" style="text-align: center">
            {% for event in nfl_events %}
            <div class="ui message" style="background-color: #202124">
                <button type="button" class="collapse" style="font-weight: bold; display: block; text-align: center; background-color: #5C5F58" id="{{ event.external_id }}">{{ event }}</button>
                <div class="collapse-content" style="text-align: center">
                    <p>Home Team --> {{ event.home_team }} | Spread: {{ event.spread_home_team_points }} / {{ event.spread_home_team_price }} | Money Line: {{ event.home_team_money_line_price }}</p>
                    <p>Away Team --> {{ event.away_team }} | Spread: {{ event.spread_away_team_points }} / {{ event.spread_away_team_price }} | Money Line: {{ event.away_team_money_line_price }}</p>
                    <p>Over Under --> {{ event.over_under_points }} | Over Price: {{ event.over_price }} | Under Price: {{ event.under_price }}</p>
                    <div class="checkbox">
                        <form method="post" enctype="multipart/form-data" class="ui form error" autocomplete="off" id="{{ event.external_id }}">
                            {% csrf_token %}
                            <hr>
                            <h4>Select the type of bet you would like to place.(Only one bet at a time per event)</h4>
                            <label for="{{ event.external_id }}">Money Line</label>
                            <input type="checkbox" name="{{ event.external_id }}" id="{{ event.external_id }}" value="money_line">
                            <br>
                            <label for="{{ event.external_id }}">Spread</label>
                            <input type="checkbox" name="{{ event.external_id }}" id="{{ event.external_id }}" value="spread">
                            <br>
                            <label for="{{ event.external_id }}">Over Under</label>
                            <input type="checkbox" name="{{ event.external_id }}" id="{{ event.external_id }}" value="over_under">
                            <br>
                            <label for="{{ event.external_id }} | predicted_outcome">Select a winner</label>
                            <select id="{{ event.external_id }} | predicted_outcome" name="{{ event.external_id }} | predicted_outcome">
                                <option disabled selected value>Select</option>
                                <option value="{{ event.home_team }}">{{ event.home_team }}</option>
                                <option value="{{ event.away_team }}">{{ event.away_team }}</option>
                                <option value="Over">Over</option>
                                <option value="Under">Under</option>
                            </select>
                            <br>
                            <label for="{{ event.external_id }} | amount_wagered">Amount to Wager</label>
                            <input type="number" step="any" name="{{ event.external_id }} | amount_wagered" id="{{ event.external_id }} | amount_wagered" placeholder="0.00">
                            <button type="submit" id="submit_form" class="ui blue basic button">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
        {% endfor %}
        </div>
    <br>
    <hr>
    <br>
    <button type="button" class="collapse" style="font-weight: bold; display: block; text-align: center" id="mma_events">MMA Fights</button>
        <div class="collapse-content" style="text-align: center">
            {% for event in mma_events %}
            <div class="ui message" style="background-color: #202124">
                <button type="button" class="collapse" style="font-weight: bold; display: block; text-align: center; background-color: #5C5F58" id="mma_fight">{{ event }}</button>
                <div class="collapse-content" style="text-align: center">
                    <p>{{ event.home_team}} | Money Line: {{ event.home_team_money_line_price }}</p>
                    <p>{{ event.away_team}} | Money Line: {{ event.away_team_money_line_price }}</p>
                </div>
            </div>
        {% endfor %}
        </div>
</div>

</body>
<script>
{# show/hide warehouse nested rows #}
    let coll = document.getElementsByClassName("collapse");
    for (let i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function () {
            console.log(this)
            this.classList.toggle("active");
            let content = this.nextElementSibling;
            if (content.style.display === "block") {
                content.style.display = "none";
            } else {
                content.style.display = "block";
            }
        });
    }
</script>
</html>
